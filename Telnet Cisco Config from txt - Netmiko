from getpass import getpass
from netmiko import Netmiko

ip_list = open('iplist.txt', 'r')
ip_list_split = ip_list.read().split()
config_commands = ['access-list 1 permit 8.8.8.8', 'access-list 1 permit 8.8.4.4']

print('Please enter the Telnet password')
telnet_password = getpass()

for device in (ip_list_split):
    net_connect = Netmiko(host=device,
                          password=telnet_password,
                          device_type='cisco_ios_telnet',
                          secret=telnet_password
                          )
    net_connect.enable() 
    net_connect.send_config_set(config_commands)
    print('Host ' + str(net_connect.find_prompt()) + f'({device}) ' + 'is done')
    net_connect.disconnect()

ip_list.close()
print(input('All done! Press enter to close'))
